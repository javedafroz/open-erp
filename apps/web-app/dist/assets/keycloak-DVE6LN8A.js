import{g as ue,c as le,a as fe}from"./react-vendor-wUyLohqb.js";var ne={};ne.byteLength=pe;ne.toByteArray=xe;ne.fromByteArray=ge;var V=[],O=[],de=typeof Uint8Array<"u"?Uint8Array:Array,oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var q=0,he=oe.length;q<he;++q)V[q]=oe[q],O[oe.charCodeAt(q)]=q;O[45]=62;O[95]=63;function ie(k){var e=k.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=k.indexOf("=");b===-1&&(b=e);var y=b===e?0:4-b%4;return[b,y]}function pe(k){var e=ie(k),b=e[0],y=e[1];return(b+y)*3/4-y}function ve(k,e,b){return(e+b)*3/4-b}function xe(k){var e,b=ie(k),y=b[0],I=b[1],g=new de(ve(k,y,I)),C=0,L=I>0?y-4:y,l;for(l=0;l<L;l+=4)e=O[k.charCodeAt(l)]<<18|O[k.charCodeAt(l+1)]<<12|O[k.charCodeAt(l+2)]<<6|O[k.charCodeAt(l+3)],g[C++]=e>>16&255,g[C++]=e>>8&255,g[C++]=e&255;return I===2&&(e=O[k.charCodeAt(l)]<<2|O[k.charCodeAt(l+1)]>>4,g[C++]=e&255),I===1&&(e=O[k.charCodeAt(l)]<<10|O[k.charCodeAt(l+1)]<<4|O[k.charCodeAt(l+2)]>>2,g[C++]=e>>8&255,g[C++]=e&255),g}function me(k){return V[k>>18&63]+V[k>>12&63]+V[k>>6&63]+V[k&63]}function ke(k,e,b){for(var y,I=[],g=e;g<b;g+=3)y=(k[g]<<16&16711680)+(k[g+1]<<8&65280)+(k[g+2]&255),I.push(me(y));return I.join("")}function ge(k){for(var e,b=k.length,y=b%3,I=[],g=16383,C=0,L=b-y;C<L;C+=g)I.push(ke(k,C,C+g>L?L:C+g));return y===1?(e=k[b-1],I.push(V[e>>2]+V[e<<4&63]+"==")):y===2&&(e=(k[b-2]<<8)+k[b-1],I.push(V[e>>10]+V[e>>4&63]+V[e<<2&63]+"=")),I.join("")}var ce={exports:{}};const we=new Proxy({},{get(k,e){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${e}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),be=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),se=ue(be);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(k){(function(){var e="input is invalid type",b=typeof window=="object",y=b?window:{};y.JS_SHA256_NO_WINDOW&&(b=!1);var I=!b&&typeof self=="object",g=!y.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;g?y=le:I&&(y=self);var C=!y.JS_SHA256_NO_COMMON_JS&&!0&&k.exports,L=!y.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),Y=[-2147483648,8388608,32768,128],N=[24,16,8,0],$=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],G=["hex","array","digest","arrayBuffer"],T=[];(y.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),L&&(y.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return typeof n=="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var ee=function(n,d){return function(w){return new R(d,!0).update(w)[n]()}},re=function(n){var d=ee("hex",n);g&&(d=K(d,n)),d.create=function(){return new R(n)},d.update=function(v){return d.create().update(v)};for(var w=0;w<G.length;++w){var h=G[w];d[h]=ee(h,n)}return d},K=function(n,d){var w=se,h=se.Buffer,v=d?"sha224":"sha256",f;h.from&&!y.JS_SHA256_NO_BUFFER_FROM?f=h.from:f=function(s){return new h(s)};var A=function(s){if(typeof s=="string")return w.createHash(v).update(s,"utf8").digest("hex");if(s==null)throw new Error(e);return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===h?w.createHash(v).update(f(s)).digest("hex"):n(s)};return A},te=function(n,d){return function(w,h){return new X(w,d,!0).update(h)[n]()}},J=function(n){var d=te("hex",n);d.create=function(v){return new X(v,n)},d.update=function(v,f){return d.create(v).update(f)};for(var w=0;w<G.length;++w){var h=G[w];d[h]=te(h,n)}return d};function R(n,d){d?(T[0]=T[16]=T[1]=T[2]=T[3]=T[4]=T[5]=T[6]=T[7]=T[8]=T[9]=T[10]=T[11]=T[12]=T[13]=T[14]=T[15]=0,this.blocks=T):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}R.prototype.update=function(n){if(!this.finalized){var d,w=typeof n;if(w!=="string"){if(w==="object"){if(n===null)throw new Error(e);if(L&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!L||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);d=!0}for(var h,v=0,f,A=n.length,s=this.blocks;v<A;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),d)for(f=this.start;v<A&&f<64;++v)s[f>>2]|=n[v]<<N[f++&3];else for(f=this.start;v<A&&f<64;++v)h=n.charCodeAt(v),h<128?s[f>>2]|=h<<N[f++&3]:h<2048?(s[f>>2]|=(192|h>>6)<<N[f++&3],s[f>>2]|=(128|h&63)<<N[f++&3]):h<55296||h>=57344?(s[f>>2]|=(224|h>>12)<<N[f++&3],s[f>>2]|=(128|h>>6&63)<<N[f++&3],s[f>>2]|=(128|h&63)<<N[f++&3]):(h=65536+((h&1023)<<10|n.charCodeAt(++v)&1023),s[f>>2]|=(240|h>>18)<<N[f++&3],s[f>>2]|=(128|h>>12&63)<<N[f++&3],s[f>>2]|=(128|h>>6&63)<<N[f++&3],s[f>>2]|=(128|h&63)<<N[f++&3]);this.lastByteIndex=f,this.bytes+=f-this.start,f>=64?(this.block=s[16],this.start=f-64,this.hash(),this.hashed=!0):this.start=f}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,d=this.lastByteIndex;n[16]=this.block,n[d>>2]|=Y[d&3],this.block=n[16],d>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},R.prototype.hash=function(){var n=this.h0,d=this.h1,w=this.h2,h=this.h3,v=this.h4,f=this.h5,A=this.h6,s=this.h7,S=this.blocks,E,P,M,H,_,D,r,t,a,u,o;for(E=16;E<64;++E)_=S[E-15],P=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=S[E-2],M=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,S[E]=S[E-16]+P+S[E-7]+M<<0;for(o=d&w,E=0;E<64;E+=4)this.first?(this.is224?(t=300032,_=S[0]-1413257819,s=_-150054599<<0,h=_+24177077<<0):(t=704751109,_=S[0]-210244248,s=_-1521486534<<0,h=_+143694565<<0),this.first=!1):(P=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),M=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),t=n&d,H=t^n&w^o,r=v&f^~v&A,_=s+M+r+$[E]+S[E],D=P+H,s=h+_<<0,h=_+D<<0),P=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),M=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),a=h&n,H=a^h&d^t,r=s&v^~s&f,_=A+M+r+$[E+1]+S[E+1],D=P+H,A=w+_<<0,w=_+D<<0,P=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),M=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),u=w&h,H=u^w&n^a,r=A&s^~A&v,_=f+M+r+$[E+2]+S[E+2],D=P+H,f=d+_<<0,d=_+D<<0,P=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),M=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),o=d&w,H=o^d&h^u,r=f&A^~f&s,_=v+M+r+$[E+3]+S[E+3],D=P+H,v=n+_<<0,n=_+D<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+d<<0,this.h2=this.h2+w<<0,this.h3=this.h3+h<<0,this.h4=this.h4+v<<0,this.h5=this.h5+f<<0,this.h6=this.h6+A<<0,this.h7=this.h7+s<<0},R.prototype.hex=function(){this.finalize();var n=this.h0,d=this.h1,w=this.h2,h=this.h3,v=this.h4,f=this.h5,A=this.h6,s=this.h7,S=l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[n&15]+l[d>>28&15]+l[d>>24&15]+l[d>>20&15]+l[d>>16&15]+l[d>>12&15]+l[d>>8&15]+l[d>>4&15]+l[d&15]+l[w>>28&15]+l[w>>24&15]+l[w>>20&15]+l[w>>16&15]+l[w>>12&15]+l[w>>8&15]+l[w>>4&15]+l[w&15]+l[h>>28&15]+l[h>>24&15]+l[h>>20&15]+l[h>>16&15]+l[h>>12&15]+l[h>>8&15]+l[h>>4&15]+l[h&15]+l[v>>28&15]+l[v>>24&15]+l[v>>20&15]+l[v>>16&15]+l[v>>12&15]+l[v>>8&15]+l[v>>4&15]+l[v&15]+l[f>>28&15]+l[f>>24&15]+l[f>>20&15]+l[f>>16&15]+l[f>>12&15]+l[f>>8&15]+l[f>>4&15]+l[f&15]+l[A>>28&15]+l[A>>24&15]+l[A>>20&15]+l[A>>16&15]+l[A>>12&15]+l[A>>8&15]+l[A>>4&15]+l[A&15];return this.is224||(S+=l[s>>28&15]+l[s>>24&15]+l[s>>20&15]+l[s>>16&15]+l[s>>12&15]+l[s>>8&15]+l[s>>4&15]+l[s&15]),S},R.prototype.toString=R.prototype.hex,R.prototype.digest=function(){this.finalize();var n=this.h0,d=this.h1,w=this.h2,h=this.h3,v=this.h4,f=this.h5,A=this.h6,s=this.h7,S=[n>>24&255,n>>16&255,n>>8&255,n&255,d>>24&255,d>>16&255,d>>8&255,d&255,w>>24&255,w>>16&255,w>>8&255,w&255,h>>24&255,h>>16&255,h>>8&255,h&255,v>>24&255,v>>16&255,v>>8&255,v&255,f>>24&255,f>>16&255,f>>8&255,f&255,A>>24&255,A>>16&255,A>>8&255,A&255];return this.is224||S.push(s>>24&255,s>>16&255,s>>8&255,s&255),S},R.prototype.array=R.prototype.digest,R.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),d=new DataView(n);return d.setUint32(0,this.h0),d.setUint32(4,this.h1),d.setUint32(8,this.h2),d.setUint32(12,this.h3),d.setUint32(16,this.h4),d.setUint32(20,this.h5),d.setUint32(24,this.h6),this.is224||d.setUint32(28,this.h7),n};function X(n,d,w){var h,v=typeof n;if(v==="string"){var f=[],A=n.length,s=0,S;for(h=0;h<A;++h)S=n.charCodeAt(h),S<128?f[s++]=S:S<2048?(f[s++]=192|S>>6,f[s++]=128|S&63):S<55296||S>=57344?(f[s++]=224|S>>12,f[s++]=128|S>>6&63,f[s++]=128|S&63):(S=65536+((S&1023)<<10|n.charCodeAt(++h)&1023),f[s++]=240|S>>18,f[s++]=128|S>>12&63,f[s++]=128|S>>6&63,f[s++]=128|S&63);n=f}else if(v==="object"){if(n===null)throw new Error(e);if(L&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!L||!ArrayBuffer.isView(n)))throw new Error(e)}else throw new Error(e);n.length>64&&(n=new R(d,!0).update(n).array());var E=[],P=[];for(h=0;h<64;++h){var M=n[h]||0;E[h]=92^M,P[h]=54^M}R.call(this,d,w),this.update(P),this.oKeyPad=E,this.inner=!0,this.sharedMemory=w}X.prototype=new R,X.prototype.finalize=function(){if(R.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();R.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),R.prototype.finalize.call(this)}};var B=re();B.sha256=B,B.sha224=re(!0),B.sha256.hmac=J(),B.sha224.hmac=J(!0),C?k.exports=B:(y.sha256=B.sha256,y.sha224=B.sha224)})()})(ce);var ye=ce.exports;const Fe=fe(ye);class Z extends Error{}Z.prototype.name="InvalidTokenError";function Se(k){return decodeURIComponent(atob(k).replace(/(.)/g,(e,b)=>{let y=b.charCodeAt(0).toString(16).toUpperCase();return y.length<2&&(y="0"+y),"%"+y}))}function Ae(k){let e=k.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Se(e)}catch{return atob(e)}}function ae(k,e){if(typeof k!="string")throw new Z("Invalid token specified: must be a string");e||(e={});const b=e.header===!0?0:1,y=k.split(".")[b];if(typeof y!="string")throw new Z(`Invalid token specified: missing part #${b+1}`);let I;try{I=Ae(y)}catch(g){throw new Z(`Invalid token specified: invalid base64 for part #${b+1} (${g.message})`)}try{return JSON.parse(I)}catch(g){throw new Z(`Invalid token specified: invalid json for part #${b+1} (${g.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function _e(k){if(!(this instanceof _e))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,b,y=[],I,g={enable:!0,callbackList:[],interval:5},C=document.getElementsByTagName("script"),L=0;L<C.length;L++)(C[L].src.indexOf("keycloak.js")!==-1||C[L].src.indexOf("keycloak.min.js")!==-1)&&C[L].src.indexOf("version=")!==-1&&(e.iframeVersion=C[L].src.substring(C[L].src.indexOf("version=")+8).split("&")[0]);var l=!0,Y=D(console.info),N=D(console.warn);e.init=function(r){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,I=_();var t=["default","cordova","cordova-native"];if(r&&t.indexOf(r.adapter)>-1?b=P(r.adapter):r&&typeof r.adapter=="object"?b=r.adapter:window.Cordova||window.cordova?b=P("cordova"):b=P(),r){if(typeof r.useNonce<"u"&&(l=r.useNonce),typeof r.checkLoginIframe<"u"&&(g.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(g.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,typeof r.scope=="string"&&(e.scope=r.scope),typeof r.acrValues=="string"&&(e.acrValues=r.acrValues),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var a=v(),u=v();u.promise.then(function(){e.onReady&&e.onReady(e.authenticated),a.setSuccess(e.authenticated)}).catch(function(x){a.setError(x)});var o=R();function p(){var x=function(U){U||(F.prompt="none"),r&&r.locale&&(F.locale=r.locale),e.login(F).then(function(){u.setSuccess()}).catch(function(z){u.setError(z)})},m=function(){var U=document.createElement("iframe"),z=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});U.setAttribute("src",z),U.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),U.setAttribute("title","keycloak-silent-check-sso"),U.style.display="none",document.body.appendChild(U);var W=function(j){if(!(j.origin!==window.location.origin||U.contentWindow!==j.source)){var Q=d(j.data);J(Q,u),document.body.removeChild(U),window.removeEventListener("message",W)}};window.addEventListener("message",W)},F={};switch(r.onLoad){case"check-sso":g.enable?A().then(function(){S().then(function(U){U?u.setSuccess():e.silentCheckSsoRedirectUri?m():x(!1)}).catch(function(U){u.setError(U)})}):e.silentCheckSsoRedirectUri?m():x(!1);break;case"login-required":x(!0);break;default:throw"Invalid value for onLoad"}}function i(){var x=d(window.location.href);if(x&&window.history.replaceState(window.history.state,null,x.newUrl),x&&x.valid)return A().then(function(){J(x,u)}).catch(function(m){u.setError(m)});r?r.token&&r.refreshToken?(B(r.token,r.refreshToken,r.idToken),g.enable?A().then(function(){S().then(function(m){m?(e.onAuthSuccess&&e.onAuthSuccess(),u.setSuccess(),s()):u.setSuccess()}).catch(function(m){u.setError(m)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),u.setSuccess()}).catch(function(m){e.onAuthError&&e.onAuthError(),r.onLoad?p():u.setError(m)})):r.onLoad?p():u.setSuccess():u.setSuccess()}function c(){var x=v(),m=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",m),x.setSuccess())};return document.addEventListener("readystatechange",m),m(),x.promise}return o.then(function(){c().then(E).then(i).catch(function(x){a.setError(x)})}),o.catch(function(x){a.setError(x)}),a.promise},e.login=function(r){return b.login(r)};function $(r){var t=null,a=window.crypto||window.msCrypto;if(a&&a.getRandomValues&&window.Uint8Array)return t=new Uint8Array(r),a.getRandomValues(t),t;t=new Array(r);for(var u=0;u<t.length;u++)t[u]=Math.floor(256*Math.random());return t}function G(r){return T(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function T(r,t){for(var a=$(r),u=new Array(r),o=0;o<r;o++)u[o]=t.charCodeAt(a[o]%t.length);return String.fromCharCode.apply(null,u)}function ee(r,t){switch(r){case"S256":var a=new Uint8Array(Fe.arrayBuffer(t)),u=ne.fromByteArray(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return u;default:throw"Invalid value for pkceMethod"}}function re(r){var t={id_token:{acr:r}};return JSON.stringify(t)}e.createLoginUrl=function(r){var t=n(),a=n(),u=b.redirectUri(r),o={state:t,nonce:a,redirectUri:encodeURIComponent(u)};r&&r.prompt&&(o.prompt=r.prompt);var p;r&&r.action=="register"?p=e.endpoints.register():p=e.endpoints.authorize();var i=r&&r.scope||e.scope;i?i.indexOf("openid")===-1&&(i="openid "+i):i="openid";var c=p+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(u)+"&state="+encodeURIComponent(t)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(i);if(l&&(c=c+"&nonce="+encodeURIComponent(a)),r&&r.prompt&&(c+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(c+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(c+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(c+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(c+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(c+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var x=re(r.acr);c+="&claims="+encodeURIComponent(x)}if((r&&r.acrValues||e.acrValues)&&(c+="&acr_values="+encodeURIComponent(r.acrValues||e.acrValues)),e.pkceMethod){var m=G(96);o.pkceCodeVerifier=m;var F=ee(e.pkceMethod,m);c+="&code_challenge="+F,c+="&code_challenge_method="+e.pkceMethod}return I.add(o),c},e.logout=function(r){return b.logout(r)},e.createLogoutUrl=function(r){var t=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(b.redirectUri(r,!1));return e.idToken&&(t+="&id_token_hint="+encodeURIComponent(e.idToken)),t},e.register=function(r){return b.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var t=K(),a=void 0;return typeof t<"u"&&(a=t+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(b.redirectUri(r))),a},e.accountManagement=function(){return b.accountManagement()},e.hasRealmRole=function(r){var t=e.realmAccess;return!!t&&t.roles.indexOf(r)>=0},e.hasResourceRole=function(r,t){if(!e.resourceAccess)return!1;var a=e.resourceAccess[t||e.clientId];return!!a&&a.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=K()+"/account",t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=v();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.profile=JSON.parse(t.responseText),a.setSuccess(e.profile)):a.setError())},t.send(),a.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=v();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.userInfo=JSON.parse(t.responseText),a.setSuccess(e.userInfo)):a.setError())},t.send(),a.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return Y("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";t-=r}return t<0},e.updateToken=function(r){var t=v();if(!e.refreshToken)return t.setError(),t.promise;r=r||5;var a=function(){var o=!1;if(r==-1?(o=!0,Y("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(o=!0,Y("[KEYCLOAK] Refreshing token: token expired")),!o)t.setSuccess(!1);else{var p="grant_type=refresh_token&refresh_token="+e.refreshToken,i=e.endpoints.token();if(y.push(t),y.length==1){var c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.withCredentials=!0,p+="&client_id="+encodeURIComponent(e.clientId);var x=new Date().getTime();c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200){Y("[KEYCLOAK] Token refreshed"),x=(x+new Date().getTime())/2;var m=JSON.parse(c.responseText);B(m.access_token,m.refresh_token,m.id_token,x),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var F=y.pop();F!=null;F=y.pop())F.setSuccess(!0)}else{N("[KEYCLOAK] Failed to refresh token"),c.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var F=y.pop();F!=null;F=y.pop())F.setError(!0)}},c.send(p)}}};if(g.enable){var u=S();u.then(function(){a()}).catch(function(o){t.setError(o)})}else a();return t.promise},e.clearToken=function(){e.token&&(B(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function K(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function te(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function J(r,t){var a=r.code,u=r.error,o=r.prompt,p=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),u){if(o!="none"){var i={error:u,error_description:r.error_description};e.onAuthError&&e.onAuthError(i),t&&t.setError(i)}else t&&t.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&F(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&a){var c="code="+a+"&grant_type=authorization_code",x=e.endpoints.token(),m=new XMLHttpRequest;m.open("POST",x,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c+="&client_id="+encodeURIComponent(e.clientId),c+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(c+="&code_verifier="+r.pkceCodeVerifier),m.withCredentials=!0,m.onreadystatechange=function(){if(m.readyState==4)if(m.status==200){var U=JSON.parse(m.responseText);F(U.access_token,U.refresh_token,U.id_token,e.flow==="standard"),s()}else e.onAuthError&&e.onAuthError(),t&&t.setError()},m.send(c)}function F(U,z,W,j){p=(p+new Date().getTime())/2,B(U,z,W,p),l&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(Y("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),t&&t.setError()):j&&(e.onAuthSuccess&&e.onAuthSuccess(),t&&t.setSuccess())}}function R(r){var t=v(),a;k?typeof k=="string"&&(a=k):a="keycloak.json";function u(m){m?e.endpoints={authorize:function(){return m.authorization_endpoint},token:function(){return m.token_endpoint},logout:function(){if(!m.end_session_endpoint)throw"Not supported by the OIDC server";return m.end_session_endpoint},checkSessionIframe:function(){if(!m.check_session_iframe)throw"Not supported by the OIDC server";return m.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!m.userinfo_endpoint)throw"Not supported by the OIDC server";return m.userinfo_endpoint}}:e.endpoints={authorize:function(){return K()+"/protocol/openid-connect/auth"},token:function(){return K()+"/protocol/openid-connect/token"},logout:function(){return K()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var F=K()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(F=F+"?version="+e.iframeVersion),F},thirdPartyCookiesIframe:function(){var F=K()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(F=F+"?version="+e.iframeVersion),F},register:function(){return K()+"/protocol/openid-connect/registrations"},userinfo:function(){return K()+"/protocol/openid-connect/userinfo"}}}if(a){var o=new XMLHttpRequest;o.open("GET",a,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||X(o)){var m=JSON.parse(o.responseText);e.authServerUrl=m["auth-server-url"],e.realm=m.realm,e.clientId=m.resource,u(null),t.setSuccess()}else t.setError()},o.send()}else{if(!k.clientId)throw"clientId missing";e.clientId=k.clientId;var p=k.oidcProvider;if(p)if(typeof p=="string"){var x;p.charAt(p.length-1)=="/"?x=p+".well-known/openid-configuration":x=p+"/.well-known/openid-configuration";var o=new XMLHttpRequest;o.open("GET",x,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200||X(o)){var F=JSON.parse(o.responseText);u(F),t.setSuccess()}else t.setError()},o.send()}else u(p),t.setSuccess();else{if(!k.url){for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++)if(i[c].src.match(/.*keycloak\.js/)){k.url=i[c].src.substr(0,i[c].src.indexOf("/js/keycloak.js"));break}}if(!k.realm)throw"realm missing";e.authServerUrl=k.url,e.realm=k.realm,u(null),t.setSuccess()}}return t.promise}function X(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function B(r,t,a,u){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),t?(e.refreshToken=t,e.refreshTokenParsed=ae(t)):(delete e.refreshToken,delete e.refreshTokenParsed),a?(e.idToken=a,e.idTokenParsed=ae(a)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=ae(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,u&&(e.timeSkew=Math.floor(u/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(Y("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var o=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;Y("[KEYCLOAK] Token expires in "+Math.round(o/1e3)+" s"),o<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,o)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function n(){var r="0123456789abcdef",t=T(36,r).split("");t[14]="4",t[19]=r.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]="-";var a=t.join("");return a}function d(r){var t=w(r);if(t){var a=I.get(t.state);return a&&(t.valid=!0,t.redirectUri=a.redirectUri,t.storedNonce=a.nonce,t.prompt=a.prompt,t.pkceCodeVerifier=a.pkceCodeVerifier),t}}function w(r){var t;switch(e.flow){case"standard":t=["code","state","session_state","kc_action_status","iss"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":t=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}t.push("error"),t.push("error_description"),t.push("error_uri");var a=r.indexOf("?"),u=r.indexOf("#"),o,p;if(e.responseMode==="query"&&a!==-1?(o=r.substring(0,a),p=h(r.substring(a+1,u!==-1?u:r.length),t),p.paramsString!==""&&(o+="?"+p.paramsString),u!==-1&&(o+=r.substring(u))):e.responseMode==="fragment"&&u!==-1&&(o=r.substring(0,u),p=h(r.substring(u+1),t),p.paramsString!==""&&(o+="#"+p.paramsString)),p&&p.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((p.oauthParams.code||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=o,p.oauthParams}else if(e.flow==="implicit"&&(p.oauthParams.access_token||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=o,p.oauthParams}}function h(r,t){for(var a=r.split("&"),u={paramsString:"",oauthParams:{}},o=0;o<a.length;o++){var p=a[o].indexOf("="),i=a[o].slice(0,p);t.indexOf(i)!==-1?u.oauthParams[i]=a[o].slice(p+1):(u.paramsString!==""&&(u.paramsString+="&"),u.paramsString+=a[o])}return u}function v(){var r={setSuccess:function(t){r.resolve(t)},setError:function(t){r.reject(t)}};return r.promise=new Promise(function(t,a){r.resolve=t,r.reject=a}),r}function f(r,t,a){var u=null,o=new Promise(function(p,i){u=setTimeout(function(){i({error:a})},t)});return Promise.race([r,o]).finally(function(){clearTimeout(u)})}function A(){var r=v();if(!g.enable||g.iframe)return r.setSuccess(),r.promise;var t=document.createElement("iframe");g.iframe=t,t.onload=function(){var o=e.endpoints.authorize();o.charAt(0)==="/"?g.iframeOrigin=te():g.iframeOrigin=o.substring(0,o.indexOf("/",8)),r.setSuccess()};var a=e.endpoints.checkSessionIframe();t.setAttribute("src",a),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t);var u=function(o){if(!(o.origin!==g.iframeOrigin||g.iframe.contentWindow!==o.source)&&(o.data=="unchanged"||o.data=="changed"||o.data=="error")){o.data!="unchanged"&&e.clearToken();for(var p=g.callbackList.splice(0,g.callbackList.length),i=p.length-1;i>=0;--i){var c=p[i];o.data=="error"?c.setError():c.setSuccess(o.data=="unchanged")}}};return window.addEventListener("message",u,!1),r.promise}function s(){g.enable&&e.token&&setTimeout(function(){S().then(function(r){r&&s()})},g.interval*1e3)}function S(){var r=v();if(g.iframe&&g.iframeOrigin){var t=e.clientId+" "+(e.sessionId?e.sessionId:"");g.callbackList.push(r);var a=g.iframeOrigin;g.callbackList.length==1&&g.iframe.contentWindow.postMessage(t,a)}else r.setSuccess();return r.promise}function E(){var r=v();if(g.enable||e.silentCheckSsoRedirectUri){var t=document.createElement("iframe");t.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-3p-check-iframe"),t.style.display="none",document.body.appendChild(t);var a=function(u){t.contentWindow===u.source&&(u.data!=="supported"&&u.data!=="unsupported"||(u.data==="unsupported"&&(N(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),g.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(t),window.removeEventListener("message",a),r.setSuccess()))};window.addEventListener("message",a,!1)}else r.setSuccess();return f(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function P(r){if(!r||r=="default")return{login:function(i){return window.location.assign(e.createLoginUrl(i)),v().promise},logout:function(i){return window.location.replace(e.createLogoutUrl(i)),v().promise},register:function(i){return window.location.assign(e.createRegisterUrl(i)),v().promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u")window.location.href=i;else throw"Not supported by the OIDC server";return v().promise},redirectUri:function(i,c){return i&&i.redirectUri?i.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){g.enable=!1;var t=function(i,c,x){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(i,c,x):window.open(i,c,x)},a=function(i){return i&&i.cordovaOptions?Object.keys(i.cordovaOptions).reduce(function(c,x){return c[x]=i.cordovaOptions[x],c},{}):{}},u=function(i){return Object.keys(i).reduce(function(c,x){return c.push(x+"="+i[x]),c},[]).join(",")},o=function(i){var c=a(i);return c.location="no",i&&i.prompt=="none"&&(c.hidden="yes"),u(c)},p=function(){return e.redirectUri||"http://localhost"};return{login:function(i){var c=v(),x=o(i),m=e.createLoginUrl(i),F=t(m,"_blank",x),U=!1,z=!1,W=function(){z=!0,F.close()};return F.addEventListener("loadstart",function(j){if(j.url.indexOf(p())==0){var Q=d(j.url);J(Q,c),W(),U=!0}}),F.addEventListener("loaderror",function(j){if(!U)if(j.url.indexOf(p())==0){var Q=d(j.url);J(Q,c),W(),U=!0}else c.setError(),W()}),F.addEventListener("exit",function(j){z||c.setError({reason:"closed_by_user"})}),c.promise},logout:function(i){var c=v(),x=e.createLogoutUrl(i),m=t(x,"_blank","location=no,hidden=yes,clearcache=yes"),F;return m.addEventListener("loadstart",function(U){U.url.indexOf(p())==0&&m.close()}),m.addEventListener("loaderror",function(U){U.url.indexOf(p())==0||(F=!0),m.close()}),m.addEventListener("exit",function(U){F?c.setError():(e.clearToken(),c.setSuccess())}),c.promise},register:function(i){var c=v(),x=e.createRegisterUrl(),m=o(i),F=t(x,"_blank",m);return F.addEventListener("loadstart",function(U){if(U.url.indexOf(p())==0){F.close();var z=d(U.url);J(z,c)}}),c.promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u"){var c=t(i,"_blank","location=no");c.addEventListener("loadstart",function(x){x.url.indexOf(p())==0&&c.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(i){return p()}}}if(r=="cordova-native")return g.enable=!1,{login:function(i){var c=v(),x=e.createLoginUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var F=d(m.url);J(F,c)}),window.cordova.plugins.browsertab.openUrl(x),c.promise},logout:function(i){var c=v(),x=e.createLogoutUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),c.setSuccess()}),window.cordova.plugins.browsertab.openUrl(x),c.promise},register:function(i){var c=v(),x=e.createRegisterUrl(i);return universalLinks.subscribe("keycloak",function(m){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var F=d(m.url);J(F,c)}),window.cordova.plugins.browsertab.openUrl(x),c.promise},accountManagement:function(){var i=e.createAccountUrl();if(typeof i<"u")window.cordova.plugins.browsertab.openUrl(i);else throw"Not supported by the OIDC server"},redirectUri:function(i){return i&&i.redirectUri?i.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var M=function(){if(!(this instanceof M))return new M;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function t(){for(var a=new Date().getTime(),u=0;u<localStorage.length;u++){var o=localStorage.key(u);if(o&&o.indexOf("kc-callback-")==0){var p=localStorage.getItem(o);if(p)try{var i=JSON.parse(p).expires;(!i||i<a)&&localStorage.removeItem(o)}catch{localStorage.removeItem(o)}}}}r.get=function(a){if(a){var u="kc-callback-"+a,o=localStorage.getItem(u);return o&&(localStorage.removeItem(u),o=JSON.parse(o)),t(),o}},r.add=function(a){t();var u="kc-callback-"+a.state;a.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(u,JSON.stringify(a))}},H=function(){if(!(this instanceof H))return new H;var r=this;r.get=function(o){if(o){var p=a("kc-callback-"+o);if(u("kc-callback-"+o,"",t(-100)),p)return JSON.parse(p)}},r.add=function(o){u("kc-callback-"+o.state,JSON.stringify(o),t(60))},r.removeItem=function(o){u(o,"",t(-100))};var t=function(o){var p=new Date;return p.setTime(p.getTime()+o*60*1e3),p},a=function(o){for(var p=o+"=",i=document.cookie.split(";"),c=0;c<i.length;c++){for(var x=i[c];x.charAt(0)==" ";)x=x.substring(1);if(x.indexOf(p)==0)return x.substring(p.length,x.length)}return""},u=function(o,p,i){var c=o+"="+p+"; expires="+i.toUTCString()+"; ";document.cookie=c}};function _(){try{return new M}catch{}return new H}function D(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}export{_e as K};
//# sourceMappingURL=keycloak-DVE6LN8A.js.map
